{% extends 'realty/base.html' %}

{% block content %}
<!-- Hero —Å–µ–∫—Ü–∏—è -->
<div class="hero-section bg-primary text-white py-5 mb-5 rounded-3">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="display-5 fw-bold mb-4">–ù–∞–π–¥–∏—Ç–µ –¥–æ–º —Å–≤–æ–µ–π –º–µ—á—Ç—ã</h1>
                <p class="lead mb-4">–¢—ã—Å—è—á–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –ø–æ –≤—Å–µ–π –†–æ—Å—Å–∏–∏. –ö–≤–∞—Ä—Ç–∏—Ä—ã, –¥–æ–º–∞, —É—á–∞—Å—Ç–∫–∏ ‚Äî –≤—Å–µ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞.</p>
                <div class="d-flex gap-3 justify-content-center flex-wrap">
                    <a href="{% url 'property_list' %}" class="btn btn-light btn-lg px-4">–ù–∞–π—Ç–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'property_create' %}" class="btn btn-outline-light btn-lg px-4">–ü—Ä–æ–¥–∞—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</a>
                    {% else %}
                    <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-4">–ù–∞—á–∞—Ç—å –ø—Ä–æ–¥–∞–≤–∞—Ç—å</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<div class="row text-center mb-5">
    <div class="col-md-3 mb-3">
        <div class="card py-3">
            <h3 class="text-primary mb-0">{{ properties_count|default:"0" }}</h3>
            <p class="text-muted mb-0">–û–±—ä–µ–∫—Ç–æ–≤ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card py-3">
            <h3 class="text-primary mb-0">{{ users_count|default:"0" }}</h3>
            <p class="text-muted mb-0">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card py-3">
            <h3 class="text-primary mb-0">{{ realtors_count|default:"0" }}</h3>
            <p class="text-muted mb-0">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–∏—ç–ª—Ç–æ—Ä–æ–≤</p>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="card py-3">
            <h3 class="text-primary mb-0">{{ sold_count|default:"0" }}</h3>
            <p class="text-muted mb-0">–£—Å–ø–µ—à–Ω—ã—Ö —Å–¥–µ–ª–æ–∫</p>
        </div>
    </div>
</div>

<!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—ä–µ–∫—Ç—ã -->
<div class="mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-dark">–ù–æ–≤—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>
        <a href="{% url 'property_list' %}" class="btn btn-outline-primary">–í–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>

    {% if properties %}
    <div class="row">
        {% for property in properties %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                {% with main_image=property.images.first %}
                    {% if main_image %}
                    <img src="{{ main_image.image.url }}" class="card-img-top" alt="{{ property.title }}" style="height: 200px; object-fit: cover;">
                    {% else %}
                    <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
                        <span class="text-muted">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                    </div>
                    {% endif %}
                {% endwith %}

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-dark">{{ property.title }}</h5>
                    <p class="card-text text-primary fw-bold mb-2">{{ property.price }} —Ä—É–±.</p>
                    <div class="text-muted small mb-3">
                        <div>{{ property.get_property_type_display }}</div>
                        <div>{{ property.area }} –∫–≤.–º ¬∑ {{ property.rooms }} –∫–æ–º–Ω.</div>
                        <div class="text-truncate">{{ property.location }}</div>
                    </div>
                    <a href="{% url 'property_detail' property.pk %}" class="btn btn-primary mt-auto">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5">
        <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</p>
        {% if user.is_authenticated %}
        <a href="{% url 'property_create' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç</a>
        {% endif %}
    </div>
    {% endif %}
</div>

<!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
<div class="bg-white py-5 border-top">
    <div class="container">
        <div class="row text-center">
            <div class="col-lg-4 mb-4">
                <div class="text-primary mb-3" style="font-size: 2.5rem;">‚úì</div>
                <h5>–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã</h5>
                <p class="text-muted">–í—Å–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é</p>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="text-primary mb-3" style="font-size: 2.5rem;">‚ö°</div>
                <h5>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫</h5>
                <p class="text-muted">–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–±–æ—Ä–∞ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º</p>
            </div>
            <div class="col-lg-4 mb-4">
                <div class="text-primary mb-3" style="font-size: 2.5rem;">üõ°Ô∏è</div>
                <h5>–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–¥–µ–ª–∫–∞</h5>
                <p class="text-muted">–ó–∞—â–∏—Ç–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤</p>
            </div>
        </div>
    </div>
</div>

<style>
.hero-section {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
}
</style>
{% endblock %}